{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { CommonModule, CurrencyPipe } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Chart } from 'chart.js/auto';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { HttpClientModule } from '@angular/common/http';\nimport { MatSnackBarModule } from '@angular/material/snack-bar';\nlet DashboardComponent = class DashboardComponent {\n  http;\n  baseUrl = 'http://localhost:8080/api';\n  pieChart;\n  barChart;\n  // Dashboard Summary\n  dashboardSummary = {\n    totalBudget: 500000,\n    totalPOValue: 100000,\n    totalUtilized: 25000,\n    totalRemaining: 475000\n  };\n  // Data arrays\n  projects = [];\n  purchaseOrders = [];\n  resources = [];\n  filteredResources = [];\n  designations = [];\n  // UI state\n  selectedProject = '';\n  activeTab = 'projects';\n  selectedDesignation = '';\n  loading = {\n    summary: false,\n    projects: false,\n    pos: false\n  };\n  constructor(http) {\n    this.http = http;\n  }\n  ngOnInit() {\n    this.loadDashboardSummary();\n    this.loadAllProjects();\n    this.loadAllPurchaseOrders();\n    this.loadResources();\n  }\n  ngOnDestroy() {\n    this.pieChart?.destroy();\n    this.barChart?.destroy();\n  }\n  // Data loading methods\n  loadDashboardSummary() {\n    this.loading.summary = true;\n    this.http.get(`${this.baseUrl}/dashboard/summary`).subscribe({\n      next: data => {\n        this.dashboardSummary = data;\n        this.initializePieChart();\n        this.loading.summary = false;\n      },\n      error: error => {\n        console.error('Error loading dashboard summary:', error);\n        this.loading.summary = false;\n      }\n    });\n  }\n  loadAllProjects() {\n    this.loading.projects = true;\n    this.http.get(`${this.baseUrl}/projects`).subscribe({\n      next: data => {\n        this.projects = data;\n        this.initializeBarChart();\n        this.loading.projects = false;\n      },\n      error: error => {\n        console.error('Error loading projects:', error);\n        this.loading.projects = false;\n      }\n    });\n  }\n  loadAllPurchaseOrders() {\n    this.loading.pos = true;\n    this.http.get(`${this.baseUrl}/pos`).subscribe({\n      next: data => {\n        this.purchaseOrders = data;\n        this.loading.pos = false;\n      },\n      error: error => {\n        console.error('Error loading POs:', error);\n        this.loading.pos = false;\n      }\n    });\n  }\n  loadResources() {\n    this.http.get(`${this.baseUrl}/resources`).subscribe({\n      next: data => {\n        this.resources = data;\n        this.filteredResources = data;\n      },\n      error: error => console.error('Error loading resources:', error)\n    });\n  }\n  // Chart initialization\n  initializePieChart() {\n    const ctx = document.getElementById('budgetChart');\n    if (ctx) {\n      this.pieChart = new Chart(ctx, {\n        type: 'pie',\n        data: {\n          labels: ['Utilized', 'Remaining'],\n          datasets: [{\n            data: [this.dashboardSummary.totalUtilized, this.dashboardSummary.totalRemaining],\n            backgroundColor: ['#005F73', '#94D2BD'],\n            borderWidth: 2\n          }]\n        },\n        options: {\n          responsive: true,\n          plugins: {\n            legend: {\n              position: 'bottom',\n              labels: {\n                padding: 20,\n                font: {\n                  size: 12\n                }\n              }\n            },\n            title: {\n              display: true,\n              text: 'Budget Overview',\n              font: {\n                size: 16,\n                weight: 'bold'\n              }\n            }\n          }\n        }\n      });\n    }\n  }\n  initializeBarChart() {\n    const ctx = document.getElementById('utilizationChart');\n    if (ctx) {\n      this.barChart = new Chart(ctx, {\n        type: 'bar',\n        data: {\n          labels: this.projects.map(p => p.projectName),\n          datasets: [{\n            label: 'Project Budget',\n            data: this.projects.map(p => p.projectBudget),\n            backgroundColor: '#0A9396'\n          }, {\n            label: 'Utilized Amount',\n            data: this.projects.map(p => p.utilizedAmount),\n            backgroundColor: '#005F73'\n          }, {\n            label: 'Remaining Balance',\n            data: this.projects.map(p => p.remainingBalance),\n            backgroundColor: '#94D2BD'\n          }]\n        },\n        options: {\n          responsive: true,\n          plugins: {\n            legend: {\n              position: 'bottom',\n              labels: {\n                font: {\n                  size: 12\n                }\n              }\n            },\n            title: {\n              display: true,\n              text: 'Project-wise Budget Analysis',\n              font: {\n                size: 16,\n                weight: 'bold'\n              }\n            }\n          },\n          scales: {\n            y: {\n              beginAtZero: true,\n              grid: {\n                color: 'rgba(0, 95, 115, 0.1)'\n              }\n            },\n            x: {\n              grid: {\n                display: false\n              }\n            }\n          }\n        }\n      });\n    }\n  }\n  // Filtering methods\n  get filteredProjects() {\n    return this.selectedProject ? this.projects.filter(project => project.projectId === this.selectedProject) : this.projects;\n  }\n  get filteredPOs() {\n    return this.selectedProject ? this.purchaseOrders.filter(po => po.projectId === this.selectedProject) : this.purchaseOrders;\n  }\n  onProjectSelect(event) {\n    this.selectedProject = event.target.value;\n    if (this.selectedProject) {\n      this.loadProjectDetails(this.selectedProject);\n    }\n  }\n  loadProjectDetails(projectId) {\n    this.http.get(`${this.baseUrl}/projects/${projectId}`).subscribe({\n      next: project => {\n        this.http.get(`${this.baseUrl}/projects/${projectId}/pos`).subscribe({\n          next: pos => {\n            this.purchaseOrders = pos;\n          },\n          error: error => console.error('Error loading project POs:', error)\n        });\n      },\n      error: error => console.error('Error loading project details:', error)\n    });\n  }\n  setActiveTab(tab) {\n    this.activeTab = tab;\n  }\n  applyDesignationFilter() {\n    if (this.selectedDesignation) {\n      this.filteredResources = this.resources.filter(resource => resource.designationName === this.selectedDesignation);\n    } else {\n      this.filteredResources = this.resources;\n    }\n  }\n};\nDashboardComponent = __decorate([Component({\n  selector: 'app-dashboard',\n  standalone: true,\n  imports: [CommonModule, FormsModule, ReactiveFormsModule, MatSnackBarModule, HttpClientModule],\n  providers: [CurrencyPipe],\n  templateUrl: './dashboard.component.html',\n  styleUrls: ['./dashboard.component.scss']\n})], DashboardComponent);\nexport { DashboardComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}