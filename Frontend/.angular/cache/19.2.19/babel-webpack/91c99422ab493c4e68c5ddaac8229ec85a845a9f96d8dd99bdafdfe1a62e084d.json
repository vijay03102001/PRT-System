{"ast":null,"code":"import { inject } from '@angular/core';\nimport { CommonModule, CurrencyPipe } from '@angular/common';\nimport { Validators, ReactiveFormsModule } from '@angular/forms';\nimport { HttpClient, HttpClientModule } from '@angular/common/http';\nimport { MatSnackBarModule } from '@angular/material/snack-bar';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/material/snack-bar\";\nimport * as i3 from \"@angular/common\";\nfunction TimesheetsComponent_option_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 27);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const resource_r1 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", resource_r1.resourceId);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(resource_r1.resourceName);\n  }\n}\nfunction TimesheetsComponent_option_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 27);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const project_r2 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", project_r2.projectId);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(project_r2.projectName);\n  }\n}\nfunction TimesheetsComponent_option_31_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 27);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const purchaseOrder_r3 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", purchaseOrder_r3.poId);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(purchaseOrder_r3.poNumber);\n  }\n}\nfunction TimesheetsComponent_tr_63_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"td\")(14, \"span\", 28);\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(16, \"td\", 29)(17, \"button\", 30);\n    i0.ɵɵlistener(\"click\", function TimesheetsComponent_tr_63_Template_button_click_17_listener() {\n      const timesheet_r5 = i0.ɵɵrestoreView(_r4).$implicit;\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.approveTimesheet(timesheet_r5.timesheetId));\n    });\n    i0.ɵɵtext(18, \" Approve \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"button\", 31);\n    i0.ɵɵlistener(\"click\", function TimesheetsComponent_tr_63_Template_button_click_19_listener() {\n      const timesheet_r5 = i0.ɵɵrestoreView(_r4).$implicit;\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.rejectTimesheet(timesheet_r5.timesheetId));\n    });\n    i0.ɵɵtext(20, \" Reject \");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const timesheet_r5 = ctx.$implicit;\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(timesheet_r5.workDate);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(timesheet_r5.resourceName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(timesheet_r5.projectName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(timesheet_r5.poNumber);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(timesheet_r5.hoursWorked);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"$\", timesheet_r5.cost, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngClass\", timesheet_r5.status.toLowerCase());\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", timesheet_r5.status, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", ctx_r5.isFrozen);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", ctx_r5.isFrozen);\n  }\n}\nexport let TimesheetsComponent = /*#__PURE__*/(() => {\n  class TimesheetsComponent {\n    fb;\n    snackBar;\n    baseUrl = 'http://localhost:8080/api';\n    http = inject(HttpClient);\n    timesheetForm;\n    pendingTimesheets = [];\n    projects = [];\n    purchaseOrders = [];\n    resources = [];\n    isFrozen = false;\n    selectedResource = null;\n    constructor(fb, snackBar) {\n      this.fb = fb;\n      this.snackBar = snackBar;\n      this.timesheetForm = this.fb.group({\n        workDate: ['', Validators.required],\n        resourceId: ['', Validators.required],\n        projectId: ['', Validators.required],\n        poId: ['', Validators.required],\n        hoursWorked: [null, [Validators.required, Validators.min(0), Validators.max(24)]]\n      });\n      this.timesheetForm.get('resourceId')?.valueChanges.subscribe(resourceId => {\n        this.updateSelectedResource(resourceId);\n      });\n    }\n    ngOnInit() {\n      this.loadResources();\n      this.loadProjects();\n      this.loadPurchaseOrders();\n      this.loadPendingTimesheets();\n    }\n    loadResources() {\n      this.http.get(`${this.baseUrl}/resources`).subscribe({\n        next: data => this.resources = data,\n        error: () => this.showNotification('Failed to load resources', true)\n      });\n    }\n    updateSelectedResource(resourceId) {\n      this.selectedResource = this.resources.find(r => r.resourceId === resourceId) || null;\n    }\n    loadProjects() {\n      this.http.get(`${this.baseUrl}/projects`).subscribe({\n        next: data => this.projects = data,\n        error: () => this.showNotification('Failed to load projects', true)\n      });\n    }\n    loadPurchaseOrders() {\n      this.http.get(`${this.baseUrl}/pos`).subscribe({\n        next: data => this.purchaseOrders = data,\n        error: () => this.showNotification('Failed to load purchase orders', true)\n      });\n    }\n    loadPendingTimesheets() {\n      this.http.get(`${this.baseUrl}/timesheets`).subscribe({\n        next: data => this.pendingTimesheets = data,\n        error: () => this.showNotification('Failed to load pending timesheets', true)\n      });\n    }\n    onSubmit() {\n      if (this.timesheetForm.valid && !this.isFrozen && this.selectedResource) {\n        const formValue = this.timesheetForm.value;\n        const newTimesheet = {\n          resourceId: formValue.resourceId,\n          projectId: formValue.projectId,\n          poId: formValue.poId,\n          workDate: formValue.workDate,\n          hoursWorked: formValue.hoursWorked\n        };\n        this.http.post(`${this.baseUrl}/timesheets`, newTimesheet).subscribe({\n          next: response => {\n            this.pendingTimesheets.push(response);\n            this.timesheetForm.reset();\n            this.showNotification('Timesheet submitted successfully');\n          },\n          error: () => this.showNotification('Failed to submit timesheet', true)\n        });\n      }\n    }\n    approveTimesheet(id) {\n      this.http.put(`${this.baseUrl}/timesheets/${id}/approve`, {}).subscribe({\n        next: () => {\n          const timesheet = this.pendingTimesheets.find(t => t.timesheetId === id);\n          if (timesheet) {\n            timesheet.status = 'Approved';\n            this.showNotification('Timesheet approved successfully');\n          }\n        },\n        error: () => this.showNotification('Failed to approve timesheet', true)\n      });\n    }\n    rejectTimesheet(id) {\n      this.http.put(`${this.baseUrl}/timesheets/${id}/reject`, {}).subscribe({\n        next: () => {\n          const timesheet = this.pendingTimesheets.find(t => t.timesheetId === id);\n          if (timesheet) {\n            timesheet.status = 'Rejected';\n            this.showNotification('Timesheet rejected successfully');\n          }\n        },\n        error: () => this.showNotification('Failed to reject timesheet', true)\n      });\n    }\n    toggleFreeze() {\n      this.isFrozen = !this.isFrozen;\n      this.showNotification(this.isFrozen ? 'Timesheet submissions are now frozen' : 'Timesheet submissions are now enabled');\n    }\n    showNotification(message, isError = false) {\n      this.snackBar.open(message, 'Close', {\n        duration: 3000,\n        horizontalPosition: 'right',\n        verticalPosition: 'top',\n        panelClass: isError ? ['error-snackbar'] : ['success-snackbar']\n      });\n    }\n    static ɵfac = function TimesheetsComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || TimesheetsComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.MatSnackBar));\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: TimesheetsComponent,\n      selectors: [[\"app-timesheets\"]],\n      features: [i0.ɵɵProvidersFeature([CurrencyPipe])],\n      decls: 73,\n      vars: 8,\n      consts: [[1, \"timesheet-container\"], [1, \"timesheet-entry\", \"card\"], [3, \"ngSubmit\", \"formGroup\"], [1, \"form-row\"], [1, \"form-group\"], [\"for\", \"date\"], [\"type\", \"date\", \"id\", \"date\", \"formControlName\", \"date\", 1, \"form-control\"], [\"for\", \"resource\"], [\"id\", \"resource\", \"formControlName\", \"resource\", 1, \"form-control\"], [\"value\", \"\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"for\", \"project\"], [\"id\", \"project\", \"formControlName\", \"project\", 1, \"form-control\"], [\"for\", \"purchaseOrder\"], [\"id\", \"purchaseOrder\", \"formControlName\", \"purchaseOrder\", 1, \"form-control\"], [\"for\", \"hours\"], [\"type\", \"number\", \"id\", \"hours\", \"formControlName\", \"hoursWorked\", \"min\", \"1\", 1, \"form-control\"], [\"type\", \"submit\", 1, \"btn-submit\", 3, \"disabled\"], [1, \"approvals-section\", \"card\"], [1, \"table-container\"], [4, \"ngFor\", \"ngForOf\"], [1, \"freeze-control\", \"card\"], [1, \"toggle-container\"], [1, \"toggle\"], [\"type\", \"checkbox\", 3, \"change\", \"checked\"], [1, \"slider\"], [1, \"toggle-label\"], [3, \"value\"], [1, \"status-badge\", 3, \"ngClass\"], [1, \"actions\"], [1, \"btn-approve\", 3, \"click\", \"disabled\"], [1, \"btn-reject\", 3, \"click\", \"disabled\"]],\n      template: function TimesheetsComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h2\");\n          i0.ɵɵtext(3, \"Timesheet Entry\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(4, \"form\", 2);\n          i0.ɵɵlistener(\"ngSubmit\", function TimesheetsComponent_Template_form_ngSubmit_4_listener() {\n            return ctx.onSubmit();\n          });\n          i0.ɵɵelementStart(5, \"div\", 3)(6, \"div\", 4)(7, \"label\", 5);\n          i0.ɵɵtext(8, \"Date\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(9, \"input\", 6);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(10, \"div\", 4)(11, \"label\", 7);\n          i0.ɵɵtext(12, \"Resource Name\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(13, \"select\", 8)(14, \"option\", 9);\n          i0.ɵɵtext(15, \"Select Resource\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(16, TimesheetsComponent_option_16_Template, 2, 2, \"option\", 10);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(17, \"div\", 3)(18, \"div\", 4)(19, \"label\", 11);\n          i0.ɵɵtext(20, \"Project\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(21, \"select\", 12)(22, \"option\", 9);\n          i0.ɵɵtext(23, \"Select Project\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(24, TimesheetsComponent_option_24_Template, 2, 2, \"option\", 10);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(25, \"div\", 4)(26, \"label\", 13);\n          i0.ɵɵtext(27, \"PO\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(28, \"select\", 14)(29, \"option\", 9);\n          i0.ɵɵtext(30, \"Select PO\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(31, TimesheetsComponent_option_31_Template, 2, 2, \"option\", 10);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(32, \"div\", 3)(33, \"div\", 4)(34, \"label\", 15);\n          i0.ɵɵtext(35, \"Hours Worked\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(36, \"input\", 16);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(37, \"button\", 17);\n          i0.ɵɵtext(38, \" SUBMIT \");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(39, \"div\", 18)(40, \"h2\");\n          i0.ɵɵtext(41, \"Timesheet Approvals\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(42, \"div\", 19)(43, \"table\")(44, \"thead\")(45, \"tr\")(46, \"th\");\n          i0.ɵɵtext(47, \"Date\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(48, \"th\");\n          i0.ɵɵtext(49, \"Resource\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(50, \"th\");\n          i0.ɵɵtext(51, \"Project\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(52, \"th\");\n          i0.ɵɵtext(53, \"PO Number\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(54, \"th\");\n          i0.ɵɵtext(55, \"Hours\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(56, \"th\");\n          i0.ɵɵtext(57, \"Cost\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(58, \"th\");\n          i0.ɵɵtext(59, \"Status\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(60, \"th\");\n          i0.ɵɵtext(61, \"Actions\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(62, \"tbody\");\n          i0.ɵɵtemplate(63, TimesheetsComponent_tr_63_Template, 21, 10, \"tr\", 20);\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(64, \"div\", 21)(65, \"h2\");\n          i0.ɵɵtext(66, \"Timesheet Controls\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(67, \"div\", 22)(68, \"label\", 23)(69, \"input\", 24);\n          i0.ɵɵlistener(\"change\", function TimesheetsComponent_Template_input_change_69_listener() {\n            return ctx.toggleFreeze();\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(70, \"span\", 25);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(71, \"span\", 26);\n          i0.ɵɵtext(72);\n          i0.ɵɵelementEnd()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"formGroup\", ctx.timesheetForm);\n          i0.ɵɵadvance(12);\n          i0.ɵɵproperty(\"ngForOf\", ctx.resources);\n          i0.ɵɵadvance(8);\n          i0.ɵɵproperty(\"ngForOf\", ctx.projects);\n          i0.ɵɵadvance(7);\n          i0.ɵɵproperty(\"ngForOf\", ctx.purchaseOrders);\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"disabled\", !ctx.timesheetForm.valid || ctx.isFrozen);\n          i0.ɵɵadvance(26);\n          i0.ɵɵproperty(\"ngForOf\", ctx.pendingTimesheets);\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"checked\", ctx.isFrozen);\n          i0.ɵɵadvance(3);\n          i0.ɵɵtextInterpolate(ctx.isFrozen ? \"Unfreeze Timesheets\" : \"Freeze Timesheets\");\n        }\n      },\n      dependencies: [CommonModule, i3.NgClass, i3.NgForOf, ReactiveFormsModule, i1.ɵNgNoValidate, i1.NgSelectOption, i1.ɵNgSelectMultipleOption, i1.DefaultValueAccessor, i1.NumberValueAccessor, i1.SelectControlValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.MinValidator, i1.FormGroupDirective, i1.FormControlName, MatSnackBarModule, HttpClientModule],\n      styles: [\"[_nghost-%COMP%]{display:block;padding:20px;margin-left:260px;background-color:#e6f2ff}.timesheet-container[_ngcontent-%COMP%]{padding:20px}.card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 4px 6px #0000001a;padding:2rem;margin-bottom:20px}h2[_ngcontent-%COMP%]{color:#040404;margin-bottom:1.5rem;font-size:2rem;border-bottom:2px solid #f0f0f0;padding-bottom:1.5rem}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:15px}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;color:#010204;font-weight:600}.form-control[_ngcontent-%COMP%]{width:100%;padding:8px 12px;border:1px solid #ddd;border-radius:4px;font-size:14px;transition:all .3s ease}.form-control[_ngcontent-%COMP%]:focus{border-color:#020202;box-shadow:0 0 5px #1e90ff4d}.btn-submit[_ngcontent-%COMP%]{background-color:#1e90ff;color:#fff;padding:10px 20px;border:none;border-radius:4px;cursor:pointer;font-weight:500;transition:all .3s ease}.btn-submit[_ngcontent-%COMP%]:hover{background-color:#030405}.btn-submit[_ngcontent-%COMP%]:disabled{background-color:#93c5fd;cursor:not-allowed}.table-container[_ngcontent-%COMP%]{overflow-x:auto}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:12px;text-align:left;border-bottom:1px solid #ddd}th[_ngcontent-%COMP%]{background-color:#f0f8ff;color:#080808;font-weight:600}tr[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.actions[_ngcontent-%COMP%]{display:flex;gap:8px}.btn-approve[_ngcontent-%COMP%]{background-color:#22c55e;color:#fff;padding:6px 12px;border:none;border-radius:4px;cursor:pointer}.btn-reject[_ngcontent-%COMP%]{background-color:#ef4444;color:#fff;padding:6px 12px;border:none;border-radius:4px;cursor:pointer}.btn-approve[_ngcontent-%COMP%]:disabled, .btn-reject[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.status-badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:12px;font-size:12px;font-weight:500}.pending[_ngcontent-%COMP%]{background-color:#fef3c7;color:#92400e}.approved[_ngcontent-%COMP%]{background-color:#dcfce7;color:#166534}.rejected[_ngcontent-%COMP%]{background-color:#fee2e2;color:#991b1b}.toggle-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.toggle[_ngcontent-%COMP%]{position:relative;display:inline-block;width:60px;height:34px}.toggle[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;inset:0;background-color:#ccc;transition:.4s;border-radius:34px}.slider[_ngcontent-%COMP%]:before{position:absolute;content:\\\"\\\";height:26px;width:26px;left:4px;bottom:4px;background-color:#fff;transition:.4s;border-radius:50%}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#1e90ff}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(26px)}.toggle-label[_ngcontent-%COMP%]{font-weight:500;color:#4169e1}@media (max-width: 1200px){[_nghost-%COMP%]{margin-left:200px}}@media (max-width: 768px){[_nghost-%COMP%]{margin-left:0;padding:10px}}\"]\n    });\n  }\n  return TimesheetsComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}