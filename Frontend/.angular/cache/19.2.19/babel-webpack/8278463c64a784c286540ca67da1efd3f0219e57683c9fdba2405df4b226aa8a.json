{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, inject } from '@angular/core';\nimport { Validators } from '@angular/forms';\nimport { HttpClient } from '@angular/common/http';\nimport { HttpClientModule } from '@angular/common/http';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { CommonModule } from '@angular/common';\nlet ResourceDetailsComponent = class ResourceDetailsComponent {\n  fb;\n  snackBar;\n  baseUrl = 'http://localhost:8080/api';\n  resources = [];\n  designations = [];\n  resourceForm;\n  showModal = false;\n  editMode = false;\n  showConfirmDialog = false;\n  resourceIdToDelete = null;\n  currentResourceId = null;\n  http = inject(HttpClient);\n  constructor(fb, snackBar) {\n    this.fb = fb;\n    this.snackBar = snackBar;\n    this.resourceForm = this.fb.group({\n      resourceName: ['', Validators.required],\n      employeeId: ['', Validators.required],\n      designationName: ['', Validators.required],\n      // Changed to designationName\n      contactDetails: ['', Validators.required]\n    });\n  }\n  ngOnInit() {\n    this.loadResources();\n    this.loadDesignations();\n  }\n  showNotification(message, isError = false) {\n    this.snackBar.open(message, 'Close', {\n      duration: 3000,\n      horizontalPosition: 'right',\n      verticalPosition: 'top',\n      panelClass: isError ? ['error-snackbar'] : ['success-snackbar']\n    });\n  }\n  loadResources() {\n    this.http.get(`${this.baseUrl}/resources`).subscribe({\n      next: data => {\n        this.resources = data;\n      },\n      error: error => {\n        console.error('Error loading resources:', error);\n        this.showNotification('Failed to load resources', true);\n      }\n    });\n  }\n  loadDesignations() {\n    this.http.get(`${this.baseUrl}/designations`).subscribe({\n      next: data => {\n        this.designations = data;\n      },\n      error: error => {\n        console.error('Error loading designations:', error);\n        this.showNotification('Failed to load designations', true);\n      }\n    });\n  }\n  openModal() {\n    this.showModal = true;\n    this.editMode = false;\n    this.resourceForm.reset();\n  }\n  closeModal() {\n    this.showModal = false;\n    this.editMode = false;\n    this.currentResourceId = null;\n    this.resourceForm.reset();\n  }\n  editResource(resource) {\n    this.editMode = true;\n    this.currentResourceId = resource.resourceId;\n    this.showModal = true;\n    this.resourceForm.patchValue({\n      resourceName: resource.resourceName,\n      employeeId: resource.employeeId,\n      designationName: resource.designationName,\n      contactDetails: resource.contactDetails\n    });\n  }\n  // Method to show the confirmation dialog and set the resourceId to be deleted\n  confirmDeleteResource(resourceId) {\n    this.resourceIdToDelete = resourceId; // Store the resource ID to delete\n    this.showConfirmDialog = true; // Show the confirmation dialog\n  }\n  // Method to cancel the deletion\n  cancelDelete() {\n    this.showConfirmDialog = false; // Close the confirmation dialog\n  }\n  // Method to delete the resource after confirmation\n  deleteResource() {\n    if (this.resourceIdToDelete !== null) {\n      this.http.delete(`${this.baseUrl}/resources/${this.resourceIdToDelete}`).subscribe({\n        next: () => {\n          // Remove the resource from the list after successful deletion\n          this.resources = this.resources.filter(r => r.resourceId !== this.resourceIdToDelete);\n          // Show success notification\n          this.showNotification('Resource deleted successfully');\n          this.showConfirmDialog = false; // Close the confirmation dialog\n        },\n        error: error => {\n          // Log the error and show failure notification\n          console.error('Error deleting resource:', error);\n          this.showNotification('Failed to delete resource', true);\n        }\n      });\n    }\n  }\n  onSubmit() {\n    if (this.resourceForm.valid) {\n      const formValue = this.resourceForm.value;\n      const resourceData = {\n        resourceName: formValue.resourceName,\n        employeeId: formValue.employeeId,\n        designationName: formValue.designationName,\n        // Directly use designation name\n        contactDetails: formValue.contactDetails\n      };\n      if (this.editMode && this.currentResourceId) {\n        // Update existing resource\n        this.http.put(`${this.baseUrl}/resources/${this.currentResourceId}`, resourceData).subscribe({\n          next: updatedResource => {\n            this.resources = this.resources.map(r => r.resourceId === this.currentResourceId ? updatedResource : r);\n            this.closeModal();\n            this.showNotification('Resource updated successfully');\n          },\n          error: error => {\n            console.error('Error updating resource:', error);\n            this.showNotification('Failed to update resource', true);\n          }\n        });\n      } else {\n        // Create new resource\n        this.http.post(`${this.baseUrl}/resources`, resourceData).subscribe({\n          next: newResource => {\n            this.resources = [...this.resources, newResource];\n            this.closeModal();\n            this.showNotification('Resource created successfully');\n          },\n          error: error => {\n            console.error('Error creating resource:', error);\n            this.showNotification('Failed to create resource', true);\n          }\n        });\n      }\n    }\n  }\n};\nResourceDetailsComponent = __decorate([Component({\n  selector: 'app-resource-details',\n  templateUrl: './resource-details.component.html',\n  styleUrls: ['./resource-details.component.css'],\n  standalone: true,\n  imports: [HttpClientModule, ReactiveFormsModule, CommonModule]\n})], ResourceDetailsComponent);\nexport { ResourceDetailsComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}