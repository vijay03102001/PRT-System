{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, inject } from '@angular/core';\nimport { Validators } from '@angular/forms';\nimport { HttpClient } from '@angular/common/http';\nimport { CommonModule } from '@angular/common';\nimport { HttpClientModule } from '@angular/common/http';\nimport { ReactiveFormsModule, FormsModule } from '@angular/forms';\nlet ResourceCostComponent = class ResourceCostComponent {\n  fb;\n  snackBar;\n  baseUrl = 'http://localhost:8080/api';\n  designations = [];\n  auditLogs = [];\n  designationForm;\n  showModal = false;\n  showConfirmDialog = false;\n  editingDesignation = null;\n  isSubmitting = false;\n  filters = {\n    designation: '',\n    date: ''\n  };\n  designationToDelete = null;\n  http = inject(HttpClient);\n  constructor(fb, snackBar) {\n    this.fb = fb;\n    this.snackBar = snackBar;\n    this.designationForm = this.fb.group({\n      name: ['', Validators.required],\n      dailyCost: ['', [Validators.required, Validators.min(0)]]\n    });\n  }\n  ngOnInit() {\n    this.loadDesignations();\n    this.loadAuditLogs();\n  }\n  loadDesignations() {\n    this.http.get(`${this.baseUrl}/designations`).subscribe({\n      next: data => this.designations = data,\n      error: () => this.showNotification('Failed to load designations', true)\n    });\n  }\n  loadAuditLogs() {\n    this.http.get(`${this.baseUrl}/designations/audit-logs`).subscribe({\n      next: data => this.auditLogs = data,\n      error: () => this.showNotification('Failed to load audit logs', true)\n    });\n  }\n  applyFilters() {\n    const params = new URLSearchParams();\n    if (this.filters.designation) params.append('designation', this.filters.designation);\n    if (this.filters.date) params.append('date', this.filters.date);\n    this.http.get(`${this.baseUrl}/designations/audit-logs?${params.toString()}`).subscribe({\n      next: data => this.auditLogs = data,\n      error: () => this.showNotification('Failed to load audit logs', true)\n    });\n  }\n  openDesignationModal() {\n    this.showModal = true;\n    this.editingDesignation = null;\n    this.designationForm.reset();\n  }\n  closeModal() {\n    this.showModal = false;\n    this.editingDesignation = null;\n    this.designationForm.reset();\n  }\n  editDesignation(designation) {\n    this.editingDesignation = designation;\n    this.showModal = true;\n    this.designationForm.patchValue({\n      name: designation.designationName,\n      dailyCost: designation.costPerHour\n    });\n  }\n  deleteDesignation(id) {\n    this.designationToDelete = id;\n    this.showConfirmDialog = true;\n  }\n  cancelDelete() {\n    this.showConfirmDialog = false;\n    this.designationToDelete = null;\n  }\n  confirmDelete() {\n    if (this.designationToDelete) {\n      this.http.delete(`${this.baseUrl}/designations/${this.designationToDelete}`).subscribe({\n        next: () => {\n          this.designations = this.designations.filter(d => d.designationId !== this.designationToDelete);\n          this.showNotification('Designation deleted successfully');\n        },\n        error: () => this.showNotification('Failed to delete designation', true),\n        complete: () => {\n          this.showConfirmDialog = false;\n          this.designationToDelete = null;\n        }\n      });\n    }\n  }\n  saveDesignation() {\n    if (this.designationForm.valid) {\n      this.isSubmitting = true;\n      const formValue = this.designationForm.value;\n      if (this.editingDesignation) {\n        this.http.put(`${this.baseUrl}/designations/${this.editingDesignation.designationId}`, formValue).subscribe({\n          next: updatedDesignation => {\n            this.designations = this.designations.map(d => d.designationId === this.editingDesignation?.designationId ? updatedDesignation : d);\n            this.closeModal();\n            this.showNotification('Designation updated successfully');\n          },\n          error: () => this.showNotification('Failed to update designation', true),\n          complete: () => this.isSubmitting = false\n        });\n      } else {\n        this.http.post(`${this.baseUrl}/designations`, formValue).subscribe({\n          next: newDesignation => {\n            this.designations = [...this.designations, newDesignation];\n            this.closeModal();\n            this.showNotification('Designation created successfully');\n          },\n          error: () => this.showNotification('Failed to create designation', true),\n          complete: () => this.isSubmitting = false\n        });\n      }\n    }\n  }\n  showError(fieldName) {\n    const field = this.designationForm.get(fieldName);\n    return field ? field.invalid && (field.dirty || field.touched) : false;\n  }\n  showNotification(message, isError = false) {\n    this.snackBar.open(message, 'Close', {\n      duration: 3000,\n      horizontalPosition: 'right',\n      verticalPosition: 'top',\n      panelClass: isError ? ['error-snackbar'] : ['success-snackbar']\n    });\n  }\n};\nResourceCostComponent = __decorate([Component({\n  selector: 'app-resource-cost',\n  templateUrl: './resource-cost.component.html',\n  styleUrls: ['./resource-cost.component.css'],\n  standalone: true,\n  imports: [HttpClientModule, ReactiveFormsModule, FormsModule, CommonModule]\n})], ResourceCostComponent);\nexport { ResourceCostComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}